name: test workflow

on:
  workflow_dispatch:
    inputs:
      branch_sc_installer:
        description: 'sc_installer branch name'
        required: true
        default: 'dev-tc8'
      branch_emp:
        description: 'emp branch name'
        required: true
        default: 'dev-tc8'
      branch_emp_app:
        description: 'emp_app branch name'
        required: true
        default: 'dev-tc8'

env:
  INSTALL4j_DOWNLOAD_URL: https://download-gcdn.ej-technologies.com/install4j/install4j_windows-x64_6_1_6.zip

jobs:
  clone_and_build_app:
    strategy:
      matrix:
        os: [ "windows-2019" ]
    runs-on: ${{ matrix.os }}
    steps:
      - uses: actions/checkout@v2
        with:
          submodules: true

      - uses: engineerd/configurator@v0.0.1
      with:
        name: install4jc.exe
        url: ${{env.INSTALL4j_DOWNLOAD_URL}}
        pathInArchive: bin/install4jc.exe

      - name: Testing
        run: |
          install4jc --help
